<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice"><%= notice %></p>
  <% end %>

  <% content_for :title, "Tasks" %>

  <div class="flex justify-between items-center">
    <h1 class="font-bold text-4xl">Tasks</h1>
    <% if authenticated? %>
      <%= Current.user.email_address %>
      <%= button_to 'Sign out', session_path, method: :delete %>
    <% end %>
    <%= link_to "New task", new_task_path, class: "rounded-lg py-3 px-5 bg-blue-600 text-white block font-medium" %>
  </div>

  <div id="tasks" class="min-w-full">
    <div class="container mx-auto py-8">
      <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-300">
          <thead>
            <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
              <th class="py-3 px-6 text-left">Title</th>
              <th class="py-3 px-6 text-left">Status</th>
              <th class="py-3 px-6 text-left">Due Date</th>
              <th class="py-3 px-6 text-left"></th>
            </tr>
          </thead>
          <tbody class="text-gray-600 text-sm font-light">
            <% @tasks.each do |task| %>
              <tr class="border-b border-gray-300 hover:bg-gray-100">
                <td class="py-3 px-6 text-left"><%= link_to task.title, task_path(task) %></td>
                <td class="py-3 px-6 text-left">
                  <% if task.completed %>
                    <span class="bg-green-200 text-green-700 py-1 px-3 rounded-full text-xs">Completed</span>
                  <% else %>
                    <span class="bg-red-200 text-red-700 py-1 px-3 rounded-full text-xs">Pending</span>
                  <% end %>
                </td>
                <td class="py-3 px-6 text-left"><%= task.due_date.strftime("%Y-%m-%d") %></td>
                <td class="py-3 px-6 text-left"><%= link_to "Edit", edit_task_path(task), class: "bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded" %> <%= link_to "Delete", task_path(task), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded" %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
